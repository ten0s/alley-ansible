# Template my.cnf for PXC
# Edit to your requirements.

[mysqld]
binlog_format                   = ROW
default-storage-engine          = innodb
innodb_autoinc_lock_mode        = 2
innodb_locks_unsafe_for_binlog  = 1
query_cache_size                = 0
query_cache_type                = 0

{% if mysql_nic is defined %}
bind-address={{hostvars[inventory_hostname][mysql_nic]['ipv4']['address']}}
{% else %}
bind-address=127.0.0.1
{% endif %}

wsrep_provider          = /usr/lib64/libgalera_smm.so
wsrep_cluster_address   = gcomm://
wsrep_cluster_name      = cluster
wsrep_slave_threads     = 1
wsrep_certify_nonPK     = 1
wsrep_max_ws_rows       = 131072
wsrep_max_ws_size       = 1073741824
wsrep_debug             = 0
wsrep_convert_LOCK_to_trx       = 0
wsrep_retry_autocommit          = 1
wsrep_auto_increment_control    = 1
wsrep_drupal_282555_workaround  = 0
wsrep_causal_reads      = 0
wsrep_notify_cmd        =
wsrep_sst_method        = rsync
wsrep_sst_auth          = root:

# Disabling symbolic-links is recommended to prevent assorted security risks
symbolic-links=0
lower_case_table_names=1 # store=lowercase compare=insensitive
