# This file was generated by Chef
# Do NOT modify this file by hand.
#
# Please read the corosync.conf.5 manual page
compatibility: whitetank

totem {
        version: 2
        secauth: off
        threads: 0
        transport: udpu
        interface {
<% if node["cluster"]["number"] == "1" || node["cluster"]["role"] == "front" %>
<% node["hosts"]["node"]["front"].keys.each do |front_host| %>		
		member {
			memberaddr: <%= node["hosts"]["node"]["front"][front_host] %>
		}
<% end %>
<% end %>
<% if node["cluster"]["number"] == "1" || node["cluster"]["role"] == "back" %>
<% node["hosts"]["node"]["back"].keys.each do |back_host| %>
		member {
			memberaddr: <%= node["hosts"]["node"]["back"][back_host] %>
		}
<% end %>
<% end %>
                ringnumber: 0
                bindnetaddr: <%= "#{node["network_conf"]["network_addr"]["#{node["cluster"]["role"]}"]}" %>
                mcastaddr: 226.98.1.10
                mcastport: 5512
                ttl: 1
        }
}

logging {
        fileline: off
        to_stderr: no
        to_logfile: yes
        to_syslog: yes
        logfile: /var/log/cluster/corosync.log
        debug: on
        timestamp: on
        logger_subsys {
                subsys: AMF
                debug: off
        }
}

amf {
        mode: disabled
}
